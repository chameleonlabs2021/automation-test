const { Underwriter } = require('../lib/components/Underwriter.js');

// To test script uncomment next 2 lines.
// const data = '{"operation":"endorsement","policy":{"characteristics":[{"createdTimestamp":"1689340451708","endTimestamp":"1719350177000","fieldGroupsByLocator":{"648f795e-81a1-499b-b670-eb3855b50adc":{"addl_interest_address_city":["Lake Soniafort"],"addl_interest_address_line_1":["414 Dooley Orchard"],"addl_interest_address_line_2":["3817 Michel Bridge"],"addl_interest_address_state":["NY"],"addl_interest_address_zip":["10004"],"addl_interest_email":["Edmund_Murray94@gmail.com"],"addl_interest_name":["Mittie"]},"84addc9b-dbec-40aa-99c1-8a428b51988a":{"address_city":["Taylor"],"address_county":["New York County"],"address_line_1":["291 Augusta Trail"],"address_line_2":["10074 Padberg Shore"],"address_state":["NY"],"address_zip":["10004"],"building_id":["v"],"iso_protection_class":["7"],"iso_territory_code":["5"],"sfdc_property_id_at_purchase":["o"]},"d880b6da-56e4-4a6c-aae4-4e3a74b3f733":{"non_primary_custom_member_id":["AA6340"],"non_primary_dob":["2000-01-01"],"non_primary_email":["Tristin_Waelchi78@yahoo.com"],"non_primary_name":["Belinda Von"],"non_primary_phone":["286-788-9918"],"non_primary_relationship":["Wife"]}},"fieldValues":{"addl_interests":["648f795e-81a1-499b-b670-eb3855b50adc"],"all_peril_deductible":["250"],"auto_renewal_status":["renew"],"building_code_effectiveness_grade":["5"],"building_details":["84addc9b-dbec-40aa-99c1-8a428b51988a"],"construction_type":["frame"],"custom_policy_number":["AA6340"],"has_restricted_dog_breed":["no"],"non_primary_policy_holders":["d880b6da-56e4-4a6c-aae4-4e3a74b3f733"],"number_of_units_in_building":["two units"],"number_significant_others":["1"],"policy_term":["0"],"prior_claims":["0"],"protective_devices":["na"],"rater_id":["AA6340"],"rater_source":["AA6340"],"superior_construction":["no"]},"grossPremium":"2370.38","grossTaxes":"219.26","issuedTimestamp":"1689340482491","locator":"b3aacb53-5127-4112-8c7c-27cee5e90996","mediaByLocator":{},"policyEndTimestamp":"1719350177000","policyLocator":"100003748","policyStartTimestamp":"1689340452000","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770","replacedTimestamp":"1689340572775","startTimestamp":"1689340452000","taxGroups":[{"amount":"219.26","name":"sales"}],"updatedTimestamp":"1689340482491"},{"createdTimestamp":"1689340572775","endTimestamp":"1689912000000","fieldGroupsByLocator":{"648f795e-81a1-499b-b670-eb3855b50adc":{"addl_interest_address_city":["Lake Soniafort"],"addl_interest_address_line_1":["414 Dooley Orchard"],"addl_interest_address_line_2":["3817 Michel Bridge"],"addl_interest_address_state":["NY"],"addl_interest_address_zip":["10004"],"addl_interest_email":["Edmund_Murray94@gmail.com"],"addl_interest_name":["Mittie"]},"84addc9b-dbec-40aa-99c1-8a428b51988a":{"address_city":["Taylor"],"address_county":["New York County"],"address_line_1":["291 Augusta Trail"],"address_line_2":["10074 Padberg Shore"],"address_state":["NY"],"address_zip":["10004"],"building_id":["v"],"iso_protection_class":["7"],"iso_territory_code":["5"],"sfdc_property_id_at_purchase":["o"]},"d880b6da-56e4-4a6c-aae4-4e3a74b3f733":{"non_primary_custom_member_id":["AA6340"],"non_primary_dob":["2000-01-01"],"non_primary_email":["Tristin_Waelchi78@yahoo.com"],"non_primary_name":["Belinda Von"],"non_primary_phone":["286-788-9918"],"non_primary_relationship":["Wife"]}},"fieldValues":{"addl_interests":["648f795e-81a1-499b-b670-eb3855b50adc"],"all_peril_deductible":["250"],"auto_renewal_status":["renew"],"building_code_effectiveness_grade":["5"],"building_details":["84addc9b-dbec-40aa-99c1-8a428b51988a"],"construction_type":["frame"],"custom_policy_number":["AA6340"],"has_restricted_dog_breed":["no"],"non_primary_policy_holders":["d880b6da-56e4-4a6c-aae4-4e3a74b3f733"],"number_of_units_in_building":["two units"],"number_significant_others":["1"],"policy_term":["0"],"prior_claims":["0"],"protective_devices":["na"],"rater_id":["AA6340"],"rater_source":["AA6340"],"superior_construction":["no"]},"grossPremium":"86.69","grossTaxes":"8.01","issuedTimestamp":"1689340572775","locator":"8fc82bd1-2941-4797-9220-f71ca20004eb","mediaByLocator":{},"policyEndTimestamp":"1719350177000","policyLocator":"100003748","policyStartTimestamp":"1689340452000","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770","startTimestamp":"1689340452000","taxGroups":[{"amount":"8.01","name":"sales"}],"updatedTimestamp":"1689340572775"},{"createdTimestamp":"1689340572775","endTimestamp":"1719288000000","fieldGroupsByLocator":{"648f795e-81a1-499b-b670-eb3855b50adc":{"addl_interest_address_city":["Lake Soniafort"],"addl_interest_address_line_1":["414 Dooley Orchard"],"addl_interest_address_line_2":["3817 Michel Bridge"],"addl_interest_address_state":["NY"],"addl_interest_address_zip":["10004"],"addl_interest_email":["Edmund_Murray94@gmail.com"],"addl_interest_name":["Mittie"]},"84addc9b-dbec-40aa-99c1-8a428b51988a":{"address_city":["Taylor"],"address_county":["New York County"],"address_line_1":["291 Augusta Trail"],"address_line_2":["10074 Padberg Shore"],"address_state":["IL"],"address_zip":["10004"],"building_id":["v"],"iso_protection_class":["1"],"iso_territory_code":["5"],"sfdc_property_id_at_purchase":["o"]},"d880b6da-56e4-4a6c-aae4-4e3a74b3f733":{"non_primary_custom_member_id":["AA6340"],"non_primary_dob":["2000-01-01"],"non_primary_email":["Tristin_Waelchi78@yahoo.com"],"non_primary_name":["Belinda Von"],"non_primary_phone":["286-788-9918"],"non_primary_relationship":["Wife"]}},"fieldValues":{"addl_interests":["648f795e-81a1-499b-b670-eb3855b50adc"],"all_peril_deductible":["250"],"auto_renewal_status":["renew"],"building_code_effectiveness_grade":["5"],"building_details":["84addc9b-dbec-40aa-99c1-8a428b51988a"],"construction_type":["frame"],"custom_policy_number":["AA6340"],"has_restricted_dog_breed":["no"],"non_primary_policy_holders":["d880b6da-56e4-4a6c-aae4-4e3a74b3f733"],"number_of_units_in_building":["two units"],"number_significant_others":["1"],"policy_term":["0.1"],"prior_claims":["0"],"protective_devices":["na"],"rater_id":["AA6340"],"rater_source":["AA6340"],"superior_construction":["no"]},"grossPremium":"2274.10","grossTaxes":"210.36","issuedTimestamp":"1689340572775","locator":"b08eb283-8f2a-4c9c-a9f5-830477259add","mediaByLocator":{},"policyEndTimestamp":"1719350177000","policyLocator":"100003748","policyStartTimestamp":"1689340452000","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770","startTimestamp":"1689912000000","taxGroups":[{"amount":"210.36","name":"sales"}],"updatedTimestamp":"1689340572775"}],"configVersion":"49","createdTimestamp":"1689340451708","currency":"USD","displayId":"100003748","documents":[{"createdTimestamp":"1689340482491","displayName":"Invoice","fileName":"invoice.pdf","locator":"7939801d-264e-4b4f-8642-9c28f6fea946","policyModificationLocator":"2871c2f7-dbdb-4657-bf93-72149ed5e49a","type":"pdf","url":"https://storage.sandbox.socotra.com/document-c2d51a2e-5dda-474d-835d-68d63d7c8e92/s3/eu-west-1/amazonaws/com/2cf6e235-ae2f-445e-b304-f43510d768cd/ad6af90b-a5d3-4097-ae43-f44d6d094088/document.original?response-content-disposition=attachment%3B%20filename%3D%22invoice.pdf%22&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20230714T131612Z&X-Amz-SignedHeaders=host&X-Amz-Expires=1800&X-Amz-Credential=AKIA5O5V6ZA7B5FTNA5D%2F20230714%2Feu-west-1%2Fs3%2Faws4_request&X-Amz-Signature=9c4607ad8d714b5e0cde434bae9dbeff2280acd86ab1db3365441f03ec05e892","urlExpirationTimestamp":"1689342372817"}],"effectiveContractEndTimestamp":"1719350177000","exposures":[{"characteristics":[{"createdTimestamp":"1689340451708","endTimestamp":"1719350177000","exposureLocator":"7bafeb43-4f0c-47f9-b2dd-a6e269151963","fieldGroupsByLocator":{},"fieldValues":{},"issuedTimestamp":"1689340482491","locator":"25f08fda-5f64-483e-89f6-d7da02c739d5","mediaByLocator":{},"policyLocator":"100003748","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770","startTimestamp":"1689340452000","updatedTimestamp":"1689340482491"}],"createdTimestamp":"1689340451708","displayId":"100003754","locator":"7bafeb43-4f0c-47f9-b2dd-a6e269151963","name":"property","perils":[{"characteristics":[{"coverageEndTimestamp":"1719350177000","coverageStartTimestamp":"1689340452000","createdTimestamp":"1689340451708","deductible":"200.00","exposureCharacteristicsLocator":"25f08fda-5f64-483e-89f6-d7da02c739d5","fieldGroupsByLocator":{},"fieldValues":{},"issuedTimestamp":"1689340482491","locator":"699204ba-bb09-4f27-ba39-3ac20364d4c5","mediaByLocator":{},"monthPremium":"166.6667","monthTechnicalPremium":"166.6667","perilLocator":"59c4ed8f-b894-43ab-8d7f-5881211ae315","policyCharacteristicsLocator":"b3aacb53-5127-4112-8c7c-27cee5e90996","policyLocator":"100003748","policyModificationLocator":"2871c2f7-dbdb-4657-bf93-72149ed5e49a","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","premium":"1896.30","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770","replacedTimestamp":"1689340572775","technicalPremium":"1896.30","updatedTimestamp":"1689340482491"},{"coverageEndTimestamp":"1719288000000","coverageStartTimestamp":"1689912000000","createdTimestamp":"1689340572775","deductible":"200.00","exposureCharacteristicsLocator":"25f08fda-5f64-483e-89f6-d7da02c739d5","fieldGroupsByLocator":{},"fieldValues":{},"issuedTimestamp":"1689340572775","locator":"dc7ca1d8-b185-4d17-bd32-5168a752f769","mediaByLocator":{},"monthPremium":"166.6667","monthTechnicalPremium":"166.6667","perilLocator":"59c4ed8f-b894-43ab-8d7f-5881211ae315","policyCharacteristicsLocator":"b08eb283-8f2a-4c9c-a9f5-830477259add","policyLocator":"100003748","policyModificationLocator":"b1947425-614a-4599-aeee-49ab4f743131","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","premium":"1819.28","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770","technicalPremium":"1819.28","updatedTimestamp":"1689340572775"},{"coverageEndTimestamp":"1689912000000","coverageStartTimestamp":"1689340452000","createdTimestamp":"1689340572775","deductible":"200.00","exposureCharacteristicsLocator":"25f08fda-5f64-483e-89f6-d7da02c739d5","fieldGroupsByLocator":{},"fieldValues":{},"issuedTimestamp":"1689340572775","locator":"94081894-c75a-482e-943d-59b0b4ff0f36","mediaByLocator":{},"monthPremium":"166.6667","monthTechnicalPremium":"166.6667","perilLocator":"59c4ed8f-b894-43ab-8d7f-5881211ae315","policyCharacteristicsLocator":"8fc82bd1-2941-4797-9220-f71ca20004eb","policyLocator":"100003748","policyModificationLocator":"b1947425-614a-4599-aeee-49ab4f743131","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","premium":"69.35","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770","technicalPremium":"69.35","updatedTimestamp":"1689340572775"}],"createdTimestamp":"1689340451708","displayId":"100003756","exposureLocator":"7bafeb43-4f0c-47f9-b2dd-a6e269151963","locator":"59c4ed8f-b894-43ab-8d7f-5881211ae315","name":"il_mine_subsidence","policyLocator":"100003748","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770","renewalGroup":"59c4ed8f-b894-43ab-8d7f-5881211ae315","updatedTimestamp":"1689340572775"},{"characteristics":[{"coverageEndTimestamp":"1719350177000","coverageStartTimestamp":"1689340452000","createdTimestamp":"1689340451708","deductible":"500.00","exposureCharacteristicsLocator":"25f08fda-5f64-483e-89f6-d7da02c739d5","fieldGroupsByLocator":{},"fieldValues":{},"issuedTimestamp":"1689340482491","locator":"a604bdda-f319-48c0-91b4-4c19970f5bbb","mediaByLocator":{},"monthPremium":"41.6667","monthTechnicalPremium":"41.6667","perilLocator":"f1688e6d-e4be-4240-8227-dedb973f481a","policyCharacteristicsLocator":"b3aacb53-5127-4112-8c7c-27cee5e90996","policyLocator":"100003748","policyModificationLocator":"2871c2f7-dbdb-4657-bf93-72149ed5e49a","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","premium":"474.08","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770","replacedTimestamp":"1689340572775","technicalPremium":"474.08","updatedTimestamp":"1689340482491"},{"coverageEndTimestamp":"1719288000000","coverageStartTimestamp":"1689912000000","createdTimestamp":"1689340572775","deductible":"500.00","exposureCharacteristicsLocator":"25f08fda-5f64-483e-89f6-d7da02c739d5","fieldGroupsByLocator":{},"fieldValues":{},"issuedTimestamp":"1689340572775","locator":"346382fc-6757-4c85-b154-88f0c03a4330","mediaByLocator":{},"monthPremium":"41.6667","monthTechnicalPremium":"41.6667","perilLocator":"f1688e6d-e4be-4240-8227-dedb973f481a","policyCharacteristicsLocator":"b08eb283-8f2a-4c9c-a9f5-830477259add","policyLocator":"100003748","policyModificationLocator":"b1947425-614a-4599-aeee-49ab4f743131","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","premium":"454.82","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770","technicalPremium":"454.82","updatedTimestamp":"1689340572775"},{"coverageEndTimestamp":"1689912000000","coverageStartTimestamp":"1689340452000","createdTimestamp":"1689340572775","deductible":"500.00","exposureCharacteristicsLocator":"25f08fda-5f64-483e-89f6-d7da02c739d5","fieldGroupsByLocator":{},"fieldValues":{},"issuedTimestamp":"1689340572775","locator":"8cccaa99-b78b-41ac-b1cb-a6133abe9858","mediaByLocator":{},"monthPremium":"41.6667","monthTechnicalPremium":"41.6667","perilLocator":"f1688e6d-e4be-4240-8227-dedb973f481a","policyCharacteristicsLocator":"8fc82bd1-2941-4797-9220-f71ca20004eb","policyLocator":"100003748","policyModificationLocator":"b1947425-614a-4599-aeee-49ab4f743131","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","premium":"17.34","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770","technicalPremium":"17.34","updatedTimestamp":"1689340572775"}],"createdTimestamp":"1689340451708","displayId":"100003758","exposureLocator":"7bafeb43-4f0c-47f9-b2dd-a6e269151963","locator":"f1688e6d-e4be-4240-8227-dedb973f481a","name":"coverage_d_loss_of_use_limit","policyLocator":"100003748","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770","renewalGroup":"f1688e6d-e4be-4240-8227-dedb973f481a","updatedTimestamp":"1689340572775"}],"policyLocator":"100003748","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770","updatedTimestamp":"1689340572775"}],"fees":[{"amount":"71.11","description":"3% Transaction fee","endTimestamp":"1719288000000","locator":"15ec5f5a-37ad-4819-83e0-f8a52654b368","name":"transaction","reversed":false,"startTimestamp":"1689340452000"},{"amount":"10.00","description":"Underwriting fee","endTimestamp":"1719288000000","locator":"d4529f3e-ca5b-4ff2-b23c-b43e4580d40c","name":"underwriting","reversed":false,"startTimestamp":"1689340452000"}],"grossFees":"81.11","invoices":[{"createdTimestamp":"1689340482787","displayId":"100003820","documents":[{"createdTimestamp":"1689340482787","displayName":"invoice_100003820.pdf","fileName":"invoice_100003820.pdf","locator":"860bc8f5-09f3-4ffb-b902-07512d6186ea","type":"pdf","url":"https://storage.sandbox.socotra.com/document-c2d51a2e-5dda-474d-835d-68d63d7c8e92/s3/eu-west-1/amazonaws/com/2cf6e235-ae2f-445e-b304-f43510d768cd/b941247a-1808-45eb-8b7a-9a98a7322c44/document.original?response-content-disposition=attachment%3B%20filename%3D%22invoice_100003820.pdf%22&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20230714T131612Z&X-Amz-SignedHeaders=host&X-Amz-Expires=1800&X-Amz-Credential=AKIA5O5V6ZA7B5FTNA5D%2F20230714%2Feu-west-1%2Fs3%2Faws4_request&X-Amz-Signature=43c25c8b637e4d50efa5ec3040ef43b68f553f106e8f24d34985b2da00412df5","urlExpirationTimestamp":"1689342372822"}],"dueTimestamp":"1689393599999","endTimestamp":"1692018852000","invoiceType":"newBusiness","locator":"e4991496-fcbd-4fb6-8b7c-64ffb50cf8c4","payments":[],"policyLocator":"100003748","settlementStatus":"outstanding","startTimestamp":"1689340452000","statuses":[{"status":"unfulfilled","timestamp":"1689340482787"}],"totalDue":"227.06","totalDueCurrency":"USD","transactionIssued":true,"updatedTimestamp":"1689340482491"}],"issuedTimestamp":"1689340482491","locator":"100003748","modifications":[{"automatedUnderwritingResult":{"decision":"accept","decisionTimestamp":"1689340482491","notes":[]},"configVersion":"48","createdTimestamp":"1689340451708","displayId":"100003752","effectiveTimestamp":"1689340452000","exposureModifications":[{"exposureLocator":"7bafeb43-4f0c-47f9-b2dd-a6e269151963","locator":"058f6b7c-2d9f-4e4a-b048-6c4bc83228e2","newExposureCharacteristicsLocator":"25f08fda-5f64-483e-89f6-d7da02c739d5","perilModifications":[{"exposureModificationLocator":"058f6b7c-2d9f-4e4a-b048-6c4bc83228e2","locator":"d838be0e-c5aa-4174-b844-20b1bc8f610a","newPerilCharacteristicsLocator":"699204ba-bb09-4f27-ba39-3ac20364d4c5","perilLocator":"59c4ed8f-b894-43ab-8d7f-5881211ae315","policyLocator":"100003748","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","premiumChange":"1896.30","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770"},{"exposureModificationLocator":"058f6b7c-2d9f-4e4a-b048-6c4bc83228e2","locator":"22a488b4-d24c-4242-87db-0a0a1a7d5869","newPerilCharacteristicsLocator":"a604bdda-f319-48c0-91b4-4c19970f5bbb","perilLocator":"f1688e6d-e4be-4240-8227-dedb973f481a","policyLocator":"100003748","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","premiumChange":"474.08","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770"}],"policyLocator":"100003748","policyModificationLocator":"2871c2f7-dbdb-4657-bf93-72149ed5e49a","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770"}],"fieldGroupsByLocator":{},"fieldValues":{},"issuedTimestamp":"1689340482491","locator":"2871c2f7-dbdb-4657-bf93-72149ed5e49a","mediaByLocator":{},"name":"modification.policy.create","newPolicyCharacteristicsLocator":"b3aacb53-5127-4112-8c7c-27cee5e90996","newPolicyCharacteristicsLocators":["b3aacb53-5127-4112-8c7c-27cee5e90996"],"number":"0","policyEndTimestamp":"1719350177000","policyLocator":"100003748","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","premiumChange":"2370.38","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770","updatedTimestamp":"1689340482491"},{"configVersion":"49","createdTimestamp":"1689340572775","displayId":"100003764","effectiveTimestamp":"1689912000000","exposureModifications":[{"exposureLocator":"7bafeb43-4f0c-47f9-b2dd-a6e269151963","locator":"b40dabeb-c23b-4638-8385-a5be9f84ac9f","perilModifications":[{"exposureModificationLocator":"b40dabeb-c23b-4638-8385-a5be9f84ac9f","locator":"c0d0b689-4839-4212-817d-863e74fd7cd1","newPerilCharacteristicsLocator":"dc7ca1d8-b185-4d17-bd32-5168a752f769","perilLocator":"59c4ed8f-b894-43ab-8d7f-5881211ae315","policyLocator":"100003748","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","premiumChange":"-77.02","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770","replacedPerilCharacteristicsLocator":"699204ba-bb09-4f27-ba39-3ac20364d4c5"},{"exposureModificationLocator":"b40dabeb-c23b-4638-8385-a5be9f84ac9f","locator":"36f6ee73-237f-4de1-998c-9b3dee5499f6","newPerilCharacteristicsLocator":"346382fc-6757-4c85-b154-88f0c03a4330","perilLocator":"f1688e6d-e4be-4240-8227-dedb973f481a","policyLocator":"100003748","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","premiumChange":"-19.26","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770","replacedPerilCharacteristicsLocator":"a604bdda-f319-48c0-91b4-4c19970f5bbb"},{"exposureModificationLocator":"b40dabeb-c23b-4638-8385-a5be9f84ac9f","locator":"9acf12f5-330f-4cda-9a29-294156ec168e","newPerilCharacteristicsLocator":"94081894-c75a-482e-943d-59b0b4ff0f36","perilLocator":"59c4ed8f-b894-43ab-8d7f-5881211ae315","policyLocator":"100003748","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","premiumChange":"-1826.95","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770","replacedPerilCharacteristicsLocator":"699204ba-bb09-4f27-ba39-3ac20364d4c5"},{"exposureModificationLocator":"b40dabeb-c23b-4638-8385-a5be9f84ac9f","locator":"c737bc36-3a19-4abb-9dd9-88ae6c02e98d","newPerilCharacteristicsLocator":"8cccaa99-b78b-41ac-b1cb-a6133abe9858","perilLocator":"f1688e6d-e4be-4240-8227-dedb973f481a","policyLocator":"100003748","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","premiumChange":"-456.74","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770","replacedPerilCharacteristicsLocator":"a604bdda-f319-48c0-91b4-4c19970f5bbb"}],"policyLocator":"100003748","policyModificationLocator":"b1947425-614a-4599-aeee-49ab4f743131","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770"}],"fieldGroupsByLocator":{},"fieldValues":{},"issuedTimestamp":"1689340572775","locator":"b1947425-614a-4599-aeee-49ab4f743131","mediaByLocator":{},"name":"endorsement.with.repricing","newPolicyCharacteristicsLocators":["8fc82bd1-2941-4797-9220-f71ca20004eb","b08eb283-8f2a-4c9c-a9f5-830477259add"],"number":"1","policyEndTimestamp":"1719288000000","policyLocator":"100003748","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","premiumChange":"-9.59","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770","updatedTimestamp":"1689340572775"}],"originalContractEndTimestamp":"1719350177000","originalContractStartTimestamp":"1689340452000","paymentScheduleName":"monthly","policyholderLocator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","productLocator":"11ee-0a2c-1c92de50-8b7b-138e66f7b770","productName":"Protect","quoteSummary":{"notDiscarded":[{"locator":"100003760","name":"1","state":"accepted"}],"selected":"100003760"},"updatedTimestamp":"1689340572775"},"policyholder":{"createdTimestamp":"1689340447165","entity":{"accountLocator":"b7bfca69-1eab-41ad-9ded-77e87d06ab0e","completed":true,"createdTimestamp":"1689340447165","flags":["flag.entity.workflow.complete"],"locator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","revision":"11ee-2248-5015a774-9196-9122528da767","updatedTimestamp":"1689340447165","values":{"tenant_2cf6e235ae2f445eb304f43510d768cd_custom_member_id":{"type":"type.string","value":["AA3961"]},"tenant_2cf6e235ae2f445eb304f43510d768cd_date_of_birth":{"type":"type.date","value":["2000-01-01"]},"tenant_2cf6e235ae2f445eb304f43510d768cd_email":{"type":"type.email","value":["Madaline3@gmail.com"]},"tenant_2cf6e235ae2f445eb304f43510d768cd_first_name":{"type":"type.string","value":["Fredy"]},"tenant_2cf6e235ae2f445eb304f43510d768cd_last_name":{"type":"type.string","value":["Will"]},"tenant_2cf6e235ae2f445eb304f43510d768cd_ofac_date":{"type":"type.number","value":["1231231231"]},"tenant_2cf6e235ae2f445eb304f43510d768cd_ofac_outcome":{"type":"type.datasource.string","value":["approved"]},"tenant_2cf6e235ae2f445eb304f43510d768cd_ofac_reason":{"type":"type.string","value":["You can\'t bypass the panel without parsing the primary USB driver!"]},"tenant_2cf6e235ae2f445eb304f43510d768cd_phone_number":{"type":"type.string","value":["891-452-3366"]},"tenant_2cf6e235ae2f445eb304f43510d768cd_stripe_customer_id":{"type":"type.string","value":["4ebaa90e-bde2-4f8c-bdd5-37c7f15a0069"]},"tenant_2cf6e235ae2f445eb304f43510d768cd_stripe_publishable_key":{"type":"type.string","value":["7125c632-3a0c-48b1-ac10-75cb684e71d5"]},"tenant_2cf6e235ae2f445eb304f43510d768cd_stripe_source_id":{"type":"type.string","value":["6d6eda15-3a08-4d24-acec-23cf153ca8e9"]}}},"locator":"4a8718b7-e79e-45d6-b8de-640f85aa6504","updatedTimestamp":"1689340447220","version":"1"}}';
// const result = getUnderwritingResult(JSON.parse(data));
// console.log(JSON.stringify(result));

function getUnderwritingResult(data) {
    console.log(`Underwriter rules - ${data?.policy?.locator}`);

    console.log(JSON.stringify(data));
    
    const response = (new Underwriter(data)).getUnderwritingResults();
    console.log('Underwriter Response: ', JSON.stringify(response));
    return response;
}

exports.getUnderwritingResult = getUnderwritingResult;